<div class="modal-header">
  <h3 class="contact-title">
    <b>Contact Me</b>
  </h3>
  <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss('Closed')">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<ng-container *ngIf="formSubmitted">
  <div class="modal-body">
    <div class="container">
      <ng-container *ngIf="formResponse?.status === 200; else formError">
        <div class="px-3 py-3 d-flex flex-column justify-content-center text-center text-success">
          <fa-icon class="mb-2" [icon]="'check-circle'" size="2x" [fixedWidth]="true"></fa-icon>
          <h5>{{ formResponse?.details }}</h5>
          <p>{{ formResponse?.message }}</p>
        </div>
      </ng-container>
      <ng-template #formError>
        <div class="px-3 py-3 d-flex flex-column justify-content-center text-center text-danger">
          <fa-icon class="mb-2" [icon]="'times'" size="2x" [fixedWidth]="true"></fa-icon>
          <h5>{{ formResponse?.details }}</h5>
          <p>{{ formResponse?.message }}</p>
        </div>
      </ng-template>
    </div>
  </div>
</ng-container>
<ng-container *ngIf="!formSubmitted">
  <form [formGroup]="contactMe" (ngSubmit)="submitForm()" id="contact-me" aria-describedby="contact-help">
    <div class="modal-body">
      <div class="container">
        <small id="contact-help" class="d-block text-muted my-3">(I'll never share your contact info with anyone else.)</small>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="name">Name
              <small class="text-danger">*</small>
            </label>
            <input type="name" class="form-control form-control-sm " [ngClass]="{'is-invalid': isContactNameInvalid}"
              formControlName="name" autocomplete='name' aria-describedby="nameHelp" placeholder="Tell me your name.">
            <span class="invalid-feedback">
              <span *ngIf="isContactNameInvalid">I'd like to know you :)</span>
            </span>
          </div>
          <div class="form-group col-md-6">
            <label for="phone" id="phoneHelp">Phone</label>
            <input type="tel" class="form-control form-control-sm" formControlName="phone" autocomplete='tel' placeholder="How can I call you back?"
              aria-describedby="phoneHelp">
          </div>
        </div>
        <div class="form-group">
          <label for="email">Email
            <small class="text-danger">*</small>
          </label>
          <input type="email" class="form-control form-control-sm" [ngClass]="{'is-invalid': isContactEmailInvalid}"
            formControlName="email" autocomplete='email' aria-describedby="emailHelp" placeholder="How can I contact with you?">
          <span class="invalid-feedback">
            <span *ngIf="isContactEmailInvalid">I'm happy to response to you :)</span>
          </span>
        </div>
        <div class="form-group">
          <label for="message">Messages</label>
          <textarea class="form-control form-control-sm" formControlName="message" cols="30" rows="5" placeholder="Tell me what's your questions."></textarea>
        </div>
        <div class="form-group d-flex justify-content-end">
          <button type="button" class="btn btn-light mr-2 mb-2" aria-label="Close" (click)="activeModal.dismiss('Cross click')">Close</button>
          <button type="submit" class="btn btn-primary mr-2 mb-2" aria-label="Submit" [disabled]="!contactMe.valid || submitting">
            <span class="btn-icon mr-2" *ngIf="submitting">
              <fa-icon [icon]="'spinner'" size="xs" [fixedWidth]="true" [spin]="true"></fa-icon>
            </span>
            <span class="btn-text">Submit</span>
          </button>
        </div>
      </div>
    </div>
  </form>
</ng-container>
